# Description : Libraries and utilities to ease the transition from kdelibs 4 to KDE Frameworks 5
# URL: https://www.kde.org/
# Packager: pierre at nutyx dot org, fanch at nutyx dot org, tnut at nutyx dot org
# Depends on: extra-cmake-modules qt5 xorg-libsm networkmanager kf5-kemoticons kf5-kdesignerplugin kf5-kinit kf5-kitemmodels kf5-kparts kf5-kunitconversion  
name=kf5-kdelibs4support
release=1

_name=kdelibs4support
source=(http://download.kde.org/stable/frameworks/${version%.*}/portingAids/${_name}-$version.tar.xz)

build() {
cd ${_name}-$version

sed -i "s:4.2:4.5:g" cmake/FindDocBookXML4.cmake

mkdir build
cd    build
cmake -DCMAKE_INSTALL_PREFIX=/usr      \
      -DCMAKE_BUILD_TYPE=Release              \
      -DSYSCONF_INSTALL_DIR=/etc/kf5   \
      -DLIB_INSTALL_DIR=lib                   \
      -DBUILD_TESTING=OFF                     \
      -DQT_PLUGIN_INSTALL_DIR=lib/qt5/plugins \
      -Wno-dev .. 

make
make DESTDIR=$PKG install
}
