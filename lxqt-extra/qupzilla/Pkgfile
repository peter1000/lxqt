# Description : QupZilla is a fast, feature-rich and lightweight QtWebKit based browser, originally intended only for educational purposes.
# URL: http://lxqt.org/
# Packager: pierre at nutyx dot org, fanch at nutyx dot org, tnut at nutyx dot org
# Depends on: cmake openssl qt5

name=qupzilla
release=1
version=1.8.6
source=(http://anduin.linuxfromscratch.org/sources/BLFS/conglomeration/$name/$name-$version.tar.gz)

build() {
cd $name-$version
sed -e '/qtlocalpeer/ i #include <QDataStream>' \
    -i src/lib/3rdparty/qtsingleapplication/qtlocalpeer.cpp 

sed -e '/QHash/ i #include <QObject>' \
    -i src/plugins/TabManager/tldextractor/tldextractor.h
sed -e 's/^TargetEnvironment/#&/'              \
    -e 's/Categories=/&Application;Internet;/' \
    -i  linux/applications/qupzilla.desktop
export QUPZILLA_PREFIX=/usr \
       USE_WEBGL=true       
qmake        
make
make DESTDIR=$PKG install
}

